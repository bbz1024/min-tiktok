# 用户行为分析

## 为何需要用户行为分析？
在推荐系统里，为了更好的为用户推荐合适的内容，需要了解用户的行为习惯。
在本项目中我们使用Gorse作为推荐系统服务， 但是我们需要通过手动的方式为用户生成标签。

## 如何实现用户行为分析？
我们可以维护一个集合，里面存储了用户行为数据，
例如：点赞与评论行为，虽然Gorse会根据用户的行为进行反馈，从而生成推荐的内容。
但是无法为用户生成标签与持久化的动作。到这里我们就需要通过用户近期视频的标签从而提取共同的标签。

## 用户行为分析的实现
- 记录用户行为对应的视频标签。
- 当到达某一个时间点时或者用户行为数量达到一定数量时，对用户行为进行统计，统计出用户行为对应的视频标签。
- 将统计分析的结果作为用户标签。

维护长度为n的队列（去重），当队列达到n长度时或者达到某个时间段，进行一次用户行为分析。
通过**定时任务** + **排序集合**，每隔断时间进行轮训一次用户
- 如果用户的行为数量达到一定数量，则进行用户行为分析。
- 如果用户的最早的时间戳距离现在时间超过一定时间，则进行用户行为分析。
> 可能这里存在时间误差，但是针对于时效性不高的场景下可以忽略。