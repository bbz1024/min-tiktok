# cache-design

--- 

## 场景分析

### 用户服务

针对于热点用户（读多写少），在该场景下我们可以进行缓存热点用户信息，减少数据库查询压力。

#### 何为热点用户？

1. 访问量高的用户（大v）
2. 视频发布量多的用户（活跃用户）
3. 粉丝数多的用户（粉丝多）

> 这里就进行考虑于访问量高的用户。

### 评论服务

当用户点击视频评论时，我们可以进行缓存最近的n条消息，这n条消息通过本地缓存进行返回。
如果请求的评论偏移量超过n条，则需要从数据库中查询。

> 在分布式场景下，本地缓存会存在多台服务器之间的数据不一致问题。但是最对于评论服务来说牺牲了消息的实时性。

